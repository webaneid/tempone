<?php
/**
 * Mobile Footer Navigation Menu
 *
 * Bottom navigation bar for mobile admin (≤782px)
 * with 5 quick access menu items.
 *
 * @package tempone
 */

// Prevent direct access.
if ( ! defined( 'ABSPATH' ) ) {
	exit;
}

/**
 * Render mobile footer navigation menu.
 *
 * Only visible on mobile devices (≤782px).
 * Provides quick access to Dashboard, Pages, Create Post, Posts, and Settings.
 */
function tempone_admin_footer_mobile_menu() : void {
	// Only display in admin area.
	if ( ! is_admin() ) {
		return;
	}

	// Get current screen.
	$current_screen = get_current_screen();
	$current_page   = '';

	// Determine active menu based on current screen.
	if ( $current_screen ) {
		if ( 'dashboard' === $current_screen->id || 'tempone-dashboard' === $current_screen->id ) {
			$current_page = 'dashboard';
		} elseif ( 'edit-page' === $current_screen->id || 'page' === $current_screen->id ) {
			$current_page = 'pages';
		} elseif ( 'post-new' === $current_screen->id ) {
			$current_page = 'create';
		} elseif ( 'edit-post' === $current_screen->id || 'post' === $current_screen->id ) {
			$current_page = 'posts';
		} elseif ( strpos( $current_screen->id, 'tempone' ) !== false ) {
			$current_page = 'settings';
		}
	}

	?>
	<div class="tempone-footer-mobile-menu">
		<nav class="tempone-footer-nav">
			<!-- Dashboard -->
			<a href="<?php echo esc_url( admin_url( 'admin.php?page=tempone-dashboard' ) ); ?>"
			   class="tempone-footer-item <?php echo 'dashboard' === $current_page ? 'is-active' : ''; ?>">
				<svg class="tempone-footer-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<g stroke="currentColor" stroke-width="1.5">
						<path stroke-linecap="round" d="M13.5 13L17 9m-3 6a2 2 0 1 1-4 0a2 2 0 0 1 4 0Zm-8-3a6 6 0 0 1 9-5.197"/>
						<path d="M2.5 12c0-4.478 0-6.717 1.391-8.109c1.392-1.39 3.63-1.39 8.11-1.39c4.477 0 6.717 0 8.108 1.39c1.391 1.392 1.391 3.63 1.391 8.11c0 4.477 0 6.717-1.391 8.108S16.479 21.5 12 21.5c-4.478 0-6.717 0-8.109-1.391c-1.39-1.391-1.39-3.63-1.39-8.109Z"/>
					</g>
				</svg>
				<span class="tempone-footer-label"><?php esc_html_e( 'Dashboard', 'tempone' ); ?></span>
			</a>

			<!-- Pages -->
			<a href="<?php echo esc_url( admin_url( 'edit.php?post_type=page' ) ); ?>"
			   class="tempone-footer-item <?php echo 'pages' === $current_page ? 'is-active' : ''; ?>">
				<svg class="tempone-footer-icon" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path fill="currentColor" fill-rule="evenodd" d="M7.29 13.904L5.25 10.75L2.096 8.71a2.4 2.4 0 0 1 .5-4.278l9.273-3.296a2.346 2.346 0 0 1 2.996 2.995L13.45 3.63a.844.844 0 0 0-1.08-1.08L3.1 5.846a.9.9 0 0 0-.19 1.604l2.78 1.799l3.279-3.28a.75.75 0 1 1 1.06 1.061L6.75 10.31l1.799 2.779a.9.9 0 0 0 1.604-.188l3.297-9.272l1.413.502l-3.296 9.273a2.4 2.4 0 0 1-4.277.5" clip-rule="evenodd"/>
				</svg>
				<span class="tempone-footer-label"><?php esc_html_e( 'Pages', 'tempone' ); ?></span>
			</a>

			<!-- Create Post (Center - Primary) -->
			<a href="<?php echo esc_url( admin_url( 'post-new.php' ) ); ?>"
			   class="tempone-footer-item tempone-footer-create <?php echo 'create' === $current_page ? 'is-active' : ''; ?>">
				<svg class="tempone-footer-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
				</svg>
				<span class="tempone-footer-label"><?php esc_html_e( 'Create', 'tempone' ); ?></span>
			</a>

			<!-- Posts -->
			<a href="<?php echo esc_url( admin_url( 'edit.php' ) ); ?>"
			   class="tempone-footer-item <?php echo 'posts' === $current_page ? 'is-active' : ''; ?>">
				<svg class="tempone-footer-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<g stroke="currentColor" stroke-linecap="round" stroke-width="1.5">
						<path d="m8 10l2.5 2.5L16 7"/>
						<path stroke-linejoin="round" d="M22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464c.974.974 1.3 2.343 1.41 4.536"/>
					</g>
				</svg>
				<span class="tempone-footer-label"><?php esc_html_e( 'Posts', 'tempone' ); ?></span>
			</a>

			<!-- Settings (Tempone Setup) -->
			<a href="<?php echo esc_url( admin_url( 'admin.php?page=tempone-setup' ) ); ?>"
			   class="tempone-footer-item <?php echo 'settings' === $current_page ? 'is-active' : ''; ?>">
				<svg class="tempone-footer-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<g stroke="currentColor" stroke-linecap="round" stroke-width="1.5">
						<path d="M9 21H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v6"/>
						<path stroke-linejoin="round" d="M12 21v-4.639c0-.51.1-.999.284-1.453M22 21v-3.185m-7.778-5.08A5.5 5.5 0 0 1 17 12c2.28 0 4.203 1.33 4.805 3.15M15 22v-2.177M19 22v-5.147C19 15.83 18.105 15 17 15s-2 .83-2 1.853v.794M2 7h20M5 5.01l.01-.011M8 5.01l.01-.011M11 5.01l.01-.011"/>
					</g>
				</svg>
				<span class="tempone-footer-label"><?php esc_html_e( 'Settings', 'tempone' ); ?></span>
			</a>
		</nav>
	</div>
	<?php
}
add_action( 'admin_footer', 'tempone_admin_footer_mobile_menu' );
